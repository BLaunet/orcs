

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick Start Guide &mdash; Orcs 1.0-alpha documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/logo.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Orcs 1.0-alpha documentation" href="index.html"/>
        <link rel="next" title="Orcs module" href="orcs_module.html"/>
        <link rel="prev" title="ORCS Documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Orcs
          

          
            
            <img src="_static/logo_sidebar.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0-alpha
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-few-words-on-orcs">A few words on ORCS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-1-create-your-option-file">Step 1: Create your option file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#required-parameters"><strong>REQUIRED</strong> parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-parameters">Optional parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-of-available-lines">List of available lines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-sanity-checks">Step 2: Sanity Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-run-it">Step 3: Run it</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-4-check-the-results">Step 4: Check the results</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="orcs_module.html">Orcs module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rvcorrect_module.html">RVCorrect module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils_module.html">Utils module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Orcs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Quick Start Guide</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/quick_start.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start-guide">
<h1><a class="toc-backref" href="#id3">Quick Start Guide</a><a class="headerlink" href="#quick-start-guide" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#quick-start-guide" id="id3">Quick Start Guide</a><ul>
<li><a class="reference internal" href="#a-few-words-on-orcs" id="id4">A few words on ORCS</a></li>
<li><a class="reference internal" href="#step-1-create-your-option-file" id="id5">Step 1: Create your option file</a><ul>
<li><a class="reference internal" href="#required-parameters" id="id6"><strong>REQUIRED</strong> parameters</a></li>
<li><a class="reference internal" href="#optional-parameters" id="id7">Optional parameters</a></li>
<li><a class="reference internal" href="#list-of-available-lines" id="id8">List of available lines</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-2-sanity-checks" id="id9">Step 2: Sanity Checks</a></li>
<li><a class="reference internal" href="#step-3-run-it" id="id10">Step 3: Run it</a></li>
<li><a class="reference internal" href="#step-4-check-the-results" id="id11">Step 4: Check the results</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="a-few-words-on-orcs">
<h2><a class="toc-backref" href="#id4">A few words on ORCS</a><a class="headerlink" href="#a-few-words-on-orcs" title="Permalink to this headline">¶</a></h2>
<p>ORCS is a fitting engine for SpIOMM and SITELLE&#8217;s data. It is designed
to fit each spectrum with a model in a parallel. The core fitting
procedure relies on a classical least-square Levenberg-Marquardt
algorithm. Which means that the statistical paradigm of ORCS is
frequentist.</p>
<p>ORCS has been built to accept any number of models (even grid
models). Up to now only three models are available (and used by
default):</p>
<ul class="simple">
<li>Emission lines (sinc convoluted with a Gaussian giving a certain
broadening to the sinc)</li>
</ul>
<a class="reference internal image-reference" href="_images/emission-line-params.png"><img alt="_images/emission-line-params.png" class="align-center" src="_images/emission-line-params.png" style="width: 70%;" /></a>
<ul class="simple">
<li>Background (treated as a polynomial)</li>
<li>Filter</li>
</ul>
<p>Emission lines and background model parameters are defined in an
&#8216;option file&#8217; which is described below. Emission line model can be
constrained in velocity and broadening: multiple groups of lines can
share the same velocity and/or the same broadening.</p>
<a class="reference internal image-reference" href="_images/sky-spectrum.png"><img alt="_images/sky-spectrum.png" class="align-center" src="_images/sky-spectrum.png" style="width: 100%;" /></a>
<p>The uncertainties on the returned parameters are based on the
assumption that noise distribution is Gaussian and that there are not
correlated. I have checked those assumptions by analyzing the
distribution of the posterior probability on each parameter with a
Monte-Carlo-Markov-Chain algorithm and found that they are very
reasonable. The uncertainties returned by the MCMC algorithm are also
very close to the one returned by our algorithm (less than a few
percents).</p>
</div>
<div class="section" id="step-1-create-your-option-file">
<h2><a class="toc-backref" href="#id5">Step 1: Create your option file</a><a class="headerlink" href="#step-1-create-your-option-file" title="Permalink to this headline">¶</a></h2>
<p>Like ORBS, ORCS uses option files to load all the parameters. Here&#8217;s
en example.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># option_file.orc</span>

<span class="c1">## ORCS option file</span>

<span class="c1"># Cube path</span>
<span class="n">CUBEPATH</span> <span class="o">/</span><span class="n">cube</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">NGC000_SN3</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">cm1</span><span class="o">.</span><span class="mf">1.0</span><span class="o">.</span><span class="n">hdf5</span>

<span class="c1"># Emission-lines parameters</span>
<span class="n">LINES</span> <span class="p">[</span><span class="n">NII</span><span class="p">]</span><span class="mi">6548</span><span class="p">,</span><span class="n">Halpha</span><span class="p">,[</span><span class="n">NII</span><span class="p">]</span><span class="mi">6583</span><span class="p">,</span><span class="n">HeI6678</span><span class="p">,[</span><span class="n">SII</span><span class="p">]</span><span class="mi">6716</span><span class="p">,[</span><span class="n">SII</span><span class="p">]</span><span class="mi">6731</span> <span class="c1"># 1</span>

<span class="c1"># (Optional) Velocity groups (same symbol for same group)</span>
<span class="n">COV_LINES</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span>

<span class="c1"># (Optional) Broadening groups (same symbol for same group)</span>
<span class="n">COV_SIGMA</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span>

<span class="c1"># Object mean velocity in km.s-1</span>
<span class="n">OBJECT_VELOCITY</span> <span class="mi">500</span>

<span class="c1"># (Optional) Velocity range to check for the initial guess</span>
<span class="n">VELOCITY_RANGE</span> <span class="mi">1000</span>

<span class="c1"># Path to a ds9 region file (with pixel coordinates) defining the</span>
<span class="c1"># fitting region</span>
<span class="n">OBJ_REG</span> <span class="n">ngc000</span><span class="o">.</span><span class="n">reg</span>

<span class="c1"># Order of the polynomial used to fit continuum</span>
<span class="n">POLY_ORDER</span> <span class="mi">0</span>

<span class="c1"># (Optional) Sky regions ds9 file path</span>
<span class="n">SKY_REG</span> <span class="n">ngc000</span><span class="o">-</span><span class="n">sky</span><span class="o">.</span><span class="n">reg</span>

<span class="c1"># (Optional) &#39;on the fly&#39; binning of the data</span>
<span class="n">BINNING</span> <span class="mi">10</span>
</pre></div>
</div>
<div class="section" id="required-parameters">
<h3><a class="toc-backref" href="#id6"><strong>REQUIRED</strong> parameters</a><a class="headerlink" href="#required-parameters" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">CUBEPATH</span></code>: Path to the hdf5 cube spectral cube.</li>
<li><code class="docutils literal"><span class="pre">LINES</span></code>: Emission Lines names. Enter an integer or a float to use
a non_recorded emission line (line wavelength must be given in
nm). See <a class="reference internal" href="#list-lines"><span class="std std-ref">List of available lines</span></a> to get a list of the available lines. Sky
lines can be added with SKY (be careful with fitting skylines, it&#8217;s
incredibly longer and generally not useful as they can be simply
removed). The same line can appear multiple time if ha a different
velocity (but it must be assigned a different velocity group with
the keyword <code class="docutils literal"><span class="pre">COV_SIGMA</span></code>)</li>
<li><code class="docutils literal"><span class="pre">OBJECT_VELOCITY</span></code>: Mean object velocity in km.s-1. This parameter
is very important and must be known precisely. If the object have a
large velocity range, use velocity_range option.</li>
<li><code class="docutils literal"><span class="pre">OBJ_REG</span></code>: Path to a ds9 region path defining the regions of the
cube which have to be fitted (region parameters must be recorded in
pixel coordinates, region shape can be a circle, a box or a
polygon). Multiple regions can be defined at the same time. To
remove a particular region its line can be commented (with a &#8216;#&#8217;) in
the region file.</li>
<li><code class="docutils literal"><span class="pre">POLY_ORDER</span></code>: Order of the polynomial used to fit continuum (avoid
high order polynomials : 0, 1 or 2 are generally enough, to remove
the sky it is better to use the keyword <code class="docutils literal"><span class="pre">SKY_REG</span></code>)</li>
</ul>
</div>
<div class="section" id="optional-parameters">
<h3><a class="toc-backref" href="#id7">Optional parameters</a><a class="headerlink" href="#optional-parameters" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">COV_LINES</span></code>: Lines velocity groups. Give the same number to the
lines with the same expected velocity (e.g. same atom). <strong>If nothing
is given all the lines are considered to have the same velocity</strong>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">COV_SIGMA</span></code>: Lines broadening groups. Give the same number to the
lines with the same expected broadening (e.g. same atom). <strong>If nothing
is given all the lines are considered to have the same broadening</strong>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">VELOCITY_RANGE</span></code>: A brute force procedure can be run on each
spectrum to guess the real velocity in a certain range around the
object mean velocity. Works very well on spectrum with a good SNR (&gt;
10). But may be wrong on low SNR spectra. This function is best used
with binned fit (see <code class="docutils literal"><span class="pre">BINNING</span></code> option below).</p>
<p>Note that if the velocity has already been computed with a higher
binning, this value will be used as an initial guess and the
velocity range won&#8217;t be taken into account. This way, using the
velocity range with a 10x10 binning is the best way to recover the
general velocity profile of a galaxy and use it as an initial guess
fot a smaller binning fit.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">SKY_REG</span></code>: Path to a ds9 region path defining the region of the
cube which is integrated to create the sky spectrum (regions
parameters must be recorded in pixel coordinates, region shape can
be a circle, a box or a polygon). The sky spectrum will be removed
from the fitted spectra.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">BINNING</span></code>: Data can be binned &#8216;on the fly&#8217; before being
fitted. This option can be used to enhance the SNR of the
spectra. Created binned maps are used by ORCS to fit a cube with a
smaller binning. For example it can be more robust to start the
first fit with a high binning value (e.g. 10x10) and lower the
binning down to 1x1 (e.g. 10x10 then 6x6 then 3x3 then 1x1). This
way the last computed parameters (especially the velocity) will be
used in the next fit: 10x10 parameters will be used by the 6x6 fit,
then 6x6 parameters will be used by the 3x3 fit etc. <em>This fitting
procedure is especially useful for objects with a large velocity
range (e.g. nearly edge-on galaxies)</em>.</p>
</li>
</ul>
</div>
<div class="section" id="list-of-available-lines">
<span id="list-lines"></span><h3><a class="toc-backref" href="#id8">List of available lines</a><a class="headerlink" href="#list-of-available-lines" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">NAME</th>
<th class="head">Air Wavelength</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>[OII]3726</td>
<td>372.603</td>
</tr>
<tr class="row-odd"><td>[OII]3729</td>
<td>372.882</td>
</tr>
<tr class="row-even"><td>[NeIII]3869</td>
<td>386.875</td>
</tr>
<tr class="row-odd"><td>Hepsilon</td>
<td>397.007</td>
</tr>
<tr class="row-even"><td>Hdelta</td>
<td>410.176</td>
</tr>
<tr class="row-odd"><td>Hgamma</td>
<td>434.047</td>
</tr>
<tr class="row-even"><td>[OIII]4363</td>
<td>436.321</td>
</tr>
<tr class="row-odd"><td>Hbeta</td>
<td>486.133</td>
</tr>
<tr class="row-even"><td>[OIII]4959</td>
<td>495.891</td>
</tr>
<tr class="row-odd"><td>[OIII]5007</td>
<td>500.684</td>
</tr>
<tr class="row-even"><td>HeI5876</td>
<td>587.567</td>
</tr>
<tr class="row-odd"><td>[OI]6300</td>
<td>630.030</td>
</tr>
<tr class="row-even"><td>[SIII]6312</td>
<td>631.21</td>
</tr>
<tr class="row-odd"><td>[NII]6548</td>
<td>654.803</td>
</tr>
<tr class="row-even"><td>Halpha</td>
<td>656.280</td>
</tr>
<tr class="row-odd"><td>[NII]6583</td>
<td>658.341</td>
</tr>
<tr class="row-even"><td>HeI6678</td>
<td>667.815</td>
</tr>
<tr class="row-odd"><td>[SII]6716</td>
<td>671.647</td>
</tr>
<tr class="row-even"><td>[SII]6731</td>
<td>673.085</td>
</tr>
<tr class="row-odd"><td>HeI7065</td>
<td>706.528</td>
</tr>
<tr class="row-even"><td>[ArIII]7136</td>
<td>713.578</td>
</tr>
<tr class="row-odd"><td>[OII]7120</td>
<td>731.965</td>
</tr>
<tr class="row-even"><td>[OII]7130</td>
<td>733.016</td>
</tr>
<tr class="row-odd"><td>[ArIII]7751</td>
<td>775.112</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="step-2-sanity-checks">
<h2><a class="toc-backref" href="#id9">Step 2: Sanity Checks</a><a class="headerlink" href="#step-2-sanity-checks" title="Permalink to this headline">¶</a></h2>
<p>Before running a 12 hours fitting procedure it can be safe to check if
the fitting parameters are correct. You can try a fit on a spectrum
integrated over a small circular aperture with the option: <strong>check</strong>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">orcs sitelle option_file.orc check X Y R</span>
</pre></div>
</div>
<p>X, Y being respectively the center of the region (in pixels) along X
and Y and R being the radius of the region (in pixels).</p>
<p>This command will output a plot of the spectrum and its fit. Use it
first over a high SNR region. If the fit does not work maybe the
velocity is not well defined. Try the option <code class="docutils literal"><span class="pre">VELOCITY_RANGE</span></code> to
give a larger fit range and look for the parameter <code class="docutils literal"><span class="pre">v</span></code> in the terminal output.</p>
<p>Another sanity check can be done by defining a small region in the
region file (OBJ_REG) and testing the fitting procedure (see step 3).</p>
<p>Finally, the <code class="docutils literal"><span class="pre">BINNING</span></code> option can be used to try a fit over a binned
cube (e.g. 3x3) which reduces a lot the fitting time (approximately by
the square of the binning).</p>
</div>
<div class="section" id="step-3-run-it">
<h2><a class="toc-backref" href="#id10">Step 3: Run it</a><a class="headerlink" href="#step-3-run-it" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">orcs sitelle option_file.orc start</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-check-the-results">
<h2><a class="toc-backref" href="#id11">Step 4: Check the results</a><a class="headerlink" href="#step-4-check-the-results" title="Permalink to this headline">¶</a></h2>
<p>Maps of the parameters of the fit can be found in the directory
created by ORCS: <code class="docutils literal"><span class="pre">OBJECT_NAME_FILTER.ORCS/MAPS/</span></code>.</p>
<p>Each line has 5 parameters (which gives 5 maps): height, amplitude,
velocity, fwhm, sigma. Height and amplitude are given in
ergs/cm^2/s/A. Velocity and broadening are given in km/s. FWHM is
given in cm^-1.</p>
<p>The flux map is also computed (from fwhm, amplitude and sigma
parameters) and given in ergs/cm^2/s.</p>
<p>Each fitted parameter is associated an uncertainty (<a href="#id1"><span class="problematic" id="id2">*</span></a>_err maps) given
in the same unit.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="orcs_module.html" class="btn btn-neutral float-right" title="Orcs module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="ORCS Documentation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Thomas Martin (thomas.martin.1@ulaval.ca).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>